# CHANGELOG

RentPipeの変更履歴です。[Keep a Changelog](https://keepachangelog.com/ja/1.0.0/) の形式に従います。

---

## [1.0.0-beta] - 2026-02-15

### 追加
- **Tailwind CSS導入**: 全HTMLページにTailwind CSS CDNを追加、カスタムカラーパレット（rentpipe-primary等）を定義
- **意見箱リンク**: ナビゲーションバーにLINEオープンチャットへのリンクを追加
- **お知らせ通知システム**: `notification-manager.js` を新規作成。バナー通知・既読管理・優先度制御
- **管理者画面**: `admin.html` を追加。Supabase連携でお知らせを管理
- **お知らせ一覧ページ**: `notifications.html` を追加
- **CSVインポート機能**: `customer-import.html` を追加。60項目全ての項目ガイド付き
- **セッション管理**: `session-manager.js` を追加。7日間タイムアウト・Google token監視・自動ログアウト
- **ベータモード**: `feature-flags.js` に `BETA_MODE` フラグを追加。全機能を無料解放
- **サブスクリプション管理**: Stripe連携のAPIエンドポイント（`/api/stripe/*`、`/api/user/*`）
- **Supabaseバックエンド**: ユーザーテーブル・プラン管理・Stripe Webhook処理
- **統計カードのスケルトンローダー**: ローディング中のUI改善
- **スケルトンローダー**: ナビゲーション即時表示とコンテンツのローディング改善

### 変更
- **Google認証**: ポップアップ方式からRedirect Flow方式に変更（ポップアップブロック対策）
- **認証セッション管理**: 複雑なトークン更新方式からシンプルな自動ログアウト方式に変更
- **環境変数管理**: APIキー等の機密情報をビルド時注入方式（`inject-env.cjs`）に変更
- **デプロイ環境**: Firebase Hosting → Vercel に移行

### 修正
- インポート機能: `window.db` → `UnifiedDataManager` に切り替え
- モバイルでの顧客テーブル横スクロール対応
- Supabase RLSポリシーの修正（anon key対応）
- ナビゲーション表示の即時化
- モバイルメニューの表示問題

---

## [0.9.0] - 2026-02 (プレベータ)

### 追加
- **フォローアップ機能**: 入居日・契約終了日基準の自動カレンダーイベント作成
  - 翌日お礼、1ヶ月後、6ヶ月後、1年後
  - 定期借家: 6ヶ月前更新提案
  - 普通借家: 4ヶ月前更新提案
- **連絡テンプレート管理**: `templates.html` を追加（UIのみ、バックエンド未実装）
- **契約情報管理**: 物件名・賃料・契約種別・契約期間等の管理
- **アーカイブ機能**: 成約/失注/その他の理由でのアーカイブ・復元
- **パイプライン**: 6ステージKanbanボード（初回相談→物件紹介→内見調整→申込準備→審査中→契約手続き）
- **Google Forms連携**: フォームからの顧客自動登録
- **顧客詳細・編集統合**: 詳細表示と編集を統合したUI

### 変更
- 顧客データ構造を拡張（`basicInfo`, `preferences`, `equipment`, `contractInfo`等のネスト構造）
- パイプラインステータス名の統一
- `data-migration.js` を追加して旧データ構造からの自動マイグレーションに対応

---

## [0.5.0] - 2026-01 (初期MVP)

### 追加
- **顧客管理基本機能**: CRUD操作（作成・読込・更新・削除）
- **Google OAuth 2.0認証**: Google Identity Servicesによる認証
- **Google Drive連携**: 顧客データのバックアップ・同期
- **Google Sheets連携**: 顧客一覧の自動同期
- **Google Calendar連携**: 基本的なフォローアップ予定登録
- **LocalStorageによるオフライン対応**: ネットワーク不要での基本操作
- **レスポンシブデザイン**: PC・タブレット・スマートフォン対応

---

## 今後のリリース予定

### [1.1.0] - 予定未定
- テンプレート機能のバックエンド実装（`templates.html` の完成）
- Google Forms統合の完成（回答の自動取り込み）
- Googleカレンダー高度機能（イベント編集・削除）

### [2.0.0] - 予定未定（正式リリース）
- `BETA_MODE = false`（機能制限の有効化、Stripe決済の有効化）
- 分析ダッシュボード
- パフォーマンス最適化

---

*このCHANGELOGはgitコミット履歴をもとに作成しました。*
