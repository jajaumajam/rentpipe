# Claude Code 使い方ガイド

## Claude Code とは

Claude Code は、ターミナル（コマンドライン）から直接 Claude と対話しながらコーディングができるツールです。
VS Code などのエディタと組み合わせて使うことで、効率的な開発が可能になります。

---

## インストール方法

### 1. Node.js のインストール（未インストールの場合）

```bash
# macOS (Homebrew)
brew install node

# Windows (公式サイトからダウンロード)
# https://nodejs.org/
```

### 2. Claude Code のインストール

```bash
npm install -g @anthropic-ai/claude-code
```

### 3. 認証設定

```bash
claude login
```

ブラウザが開き、Anthropic アカウントでログインします。

---

## 基本的な使い方

### プロジェクトディレクトリで起動

```bash
cd /path/to/rentpipe
claude
```

これで Claude との対話が始まります。

### 基本コマンド

| コマンド | 説明 |
|---------|------|
| `claude` | 対話モードを開始 |
| `claude "質問"` | 単発の質問を実行 |
| `claude --help` | ヘルプを表示 |
| `/help` | 対話中のヘルプ |
| `/clear` | 会話履歴をクリア |
| `/quit` または `Ctrl+C` | 終了 |

---

## 効果的な使い方

### 1. プロジェクトのコンテキストを与える

最初に引き継ぎ文書を読ませることで、プロジェクトの背景を理解させます。

```
CLAUDE_HANDOFF.md を読んで、このプロジェクトの概要を把握してください。
```

### 2. 具体的なタスクを指示する

```
Supabase Auth を使ったユーザー認証を実装してください。
以下の要件です：
- Google OAuth でログイン
- ユーザーテーブルに email, plan, stripeCustomerId を保存
- /api/user/plan エンドポイントを作成
```

### 3. ファイルを指定して作業させる

```
public/js/app-initializer.js を見て、
認証フローの改善点を提案してください。
```

### 4. 段階的に進める

大きなタスクは分割して依頼します。

```
Phase 1 として、まず Supabase プロジェクトの設定と
ユーザーテーブルのスキーマを作成してください。
```

---

## RentPipe 開発での推奨フロー

### セッション開始時

```
1. CLAUDE_HANDOFF.md を読んでプロジェクト概要を把握
2. 今日のタスクを伝える
3. 必要なファイルを確認させる
```

**例:**
```
CLAUDE_HANDOFF.md を読んで、このプロジェクトの現状を把握してください。
今日は Phase 1 の「最小バックエンド構築」に取り組みたいです。
Vercel + Supabase で構築します。
```

### 開発中

```
1. 小さな単位でタスクを依頼
2. 生成されたコードを確認
3. 動作確認してフィードバック
4. 必要に応じて修正を依頼
```

### セッション終了時

```
今日の作業内容をまとめてください。
次回のセッションで続きを進めるための引き継ぎポイントも教えてください。
```

---

## 便利なテクニック

### 1. コードの説明を求める

```
public/js/unified-data-manager.js の updateCustomer 関数を
説明してください。
```

### 2. リファクタリングを依頼

```
public/js/google-calendar-api.js をリファクタリングして、
エラーハンドリングを改善してください。
```

### 3. テストを書かせる

```
archive-manager.js のユニットテストを Jest で作成してください。
```

### 4. デバッグを依頼

```
以下のエラーが発生しています。原因を調査して修正してください。

[エラーメッセージをペースト]
```

### 5. 設計相談

```
Stripe Webhook の実装方法について、
ベストプラクティスを教えてください。
Vercel の API Routes で実装する予定です。
```

---

## 注意点

### 1. コンテキストの制限

長いセッションではコンテキストが溢れることがあります。
新しいタスクに移る際は `/clear` でリセットし、
必要な情報だけを再度伝えるのが効果的です。

### 2. 確認してから実行

Claude が提案したコマンド（特に削除系）は、
内容を確認してから実行してください。

### 3. バージョン管理

作業前に Git でコミットしておくと、
問題があった場合に簡単に戻せます。

```bash
git add .
git commit -m "作業前のバックアップ"
```

### 4. 機密情報の取り扱い

API キーやシークレットは直接貼り付けず、
環境変数で管理してください。

```
.env ファイルに STRIPE_SECRET_KEY を設定する方法を教えてください。
（実際のキーは自分で設定します）
```

---

## トラブルシューティング

### Claude Code が起動しない

```bash
# Node.js のバージョン確認
node --version  # v18 以上推奨

# 再インストール
npm uninstall -g @anthropic-ai/claude-code
npm install -g @anthropic-ai/claude-code
```

### 認証エラー

```bash
# 再ログイン
claude logout
claude login
```

### レスポンスが途中で切れる

長いコードを生成させる場合は、分割して依頼します。

```
まず、関数の前半部分だけ生成してください。
```

---

## 推奨ワークフロー（RentPipe 開発）

```
┌─────────────────────────────────────────┐
│  1. VS Code でプロジェクトを開く         │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│  2. ターミナルで claude を起動           │
│     cd rentpipe && claude               │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│  3. 引き継ぎ文書を読ませる               │
│     "CLAUDE_HANDOFF.md を読んで..."     │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│  4. タスクを依頼                        │
│     "Phase 1 の Supabase 設定を..."     │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│  5. 生成されたコードを VS Code で確認    │
│     動作テスト → フィードバック          │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│  6. Git コミット                        │
│     git add . && git commit -m "..."    │
└─────────────────────────────────────────┘
```

---

## 参考リンク

- [Claude Code 公式ドキュメント](https://docs.anthropic.com/claude-code)
- [Anthropic ダッシュボード](https://console.anthropic.com/)

---

*このガイドは 2026年2月12日 に作成されました。*
