<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ダッシュボード - RentPipe</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">
            <h1>RentPipe</h1>
            <span class="nav-subtitle">賃貸営業を、流れるように</span>
        </div>
        <div class="nav-menu">
            <a href="index.html" class="nav-link active">📊 ダッシュボード</a>
            <a href="customer.html" class="nav-link">👥 顧客管理</a>
            <a href="pipeline.html" class="nav-link">🔄 パイプライン</a>
            <a href="#" class="nav-link">📈 レポート</a>
            <button onclick="logout()" class="btn btn-outline">ログアウト</button>
        </div>
    </nav>

    <main class="dashboard-container">
        <!-- ダッシュボードヘッダー -->
        <section class="dashboard-header">
            <div class="header-content">
                <h1>ダッシュボード</h1>
                <p>本日の業務概要と重要な指標をご確認ください</p>
            </div>
            <div class="header-actions">
                <button onclick="window.location.href='customer.html'" class="btn btn-primary">
                    👤 新規顧客登録
                </button>
            </div>
        </section>

        <!-- 重要指標 -->
        <section class="dashboard-stats">
            <div class="stats-grid">
                <div class="stat-card primary">
                    <div class="stat-icon">👥</div>
                    <div class="stat-content">
                        <h3 id="totalCustomers">0</h3>
                        <p>総顧客数</p>
                    </div>
                </div>
                <div class="stat-card success">
                    <div class="stat-icon">✅</div>
                    <div class="stat-content">
                        <h3 id="completedDeals">0</h3>
                        <p>今月成約</p>
                    </div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-icon">⏳</div>
                    <div class="stat-content">
                        <h3 id="activeDeals">0</h3>
                        <p>進行中案件</p>
                    </div>
                </div>
                <div class="stat-card info">
                    <div class="stat-icon">📈</div>
                    <div class="stat-content">
                        <h3 id="conversionRate">0%</h3>
                        <p>成約率</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- パイプライン概要 -->
        <section class="dashboard-section">
            <div class="section-header">
                <h2>パイプライン概要</h2>
                <a href="pipeline.html" class="btn btn-outline">詳細表示</a>
            </div>
            <div class="pipeline-overview">
                <div class="pipeline-stage">
                    <div class="stage-number" id="stage-初回相談">0</div>
                    <div class="stage-label">初回相談</div>
                </div>
                <div class="pipeline-arrow">→</div>
                <div class="pipeline-stage">
                    <div class="stage-number" id="stage-物件紹介">0</div>
                    <div class="stage-label">物件紹介</div>
                </div>
                <div class="pipeline-arrow">→</div>
                <div class="pipeline-stage">
                    <div class="stage-number" id="stage-内見">0</div>
                    <div class="stage-label">内見</div>
                </div>
                <div class="pipeline-arrow">→</div>
                <div class="pipeline-stage">
                    <div class="stage-number" id="stage-申込">0</div>
                    <div class="stage-label">申込</div>
                </div>
                <div class="pipeline-arrow">→</div>
                <div class="pipeline-stage">
                    <div class="stage-number" id="stage-審査">0</div>
                    <div class="stage-label">審査</div>
                </div>
                <div class="pipeline-arrow">→</div>
                <div class="pipeline-stage">
                    <div class="stage-number" id="stage-契約">0</div>
                    <div class="stage-label">契約</div>
                </div>
                <div class="pipeline-arrow">→</div>
                <div class="pipeline-stage success">
                    <div class="stage-number" id="stage-完了">0</div>
                    <div class="stage-label">完了</div>
                </div>
            </div>
        </section>

        <!-- 最近の顧客 -->
        <section class="dashboard-section">
            <div class="section-header">
                <h2>最近の顧客</h2>
                <a href="customer.html" class="btn btn-outline">全て表示</a>
            </div>
            <div class="recent-customers" id="recentCustomers">
                <p style="text-align: center; color: #64748b; padding: 20px;">
                    最近の顧客情報を読み込み中...
                </p>
            </div>
        </section>

        <!-- 今日のタスク -->
        <section class="dashboard-section">
            <div class="section-header">
                <h2>今日のタスク</h2>
                <button class="btn btn-outline">タスク追加</button>
            </div>
            <div class="tasks-list">
                <div class="task-item">
                    <div class="task-content">
                        <h4>田中様 内見予定</h4>
                        <p>時間: 14:00 - 15:00</p>
                    </div>
                    <div class="task-status">今日</div>
                </div>
                <div class="task-item">
                    <div class="task-content">
                        <h4>山田様 契約書準備</h4>
                        <p>契約予定: 明日</p>
                    </div>
                    <div class="task-status">急ぎ</div>
                </div>
                <div class="task-item">
                    <div class="task-content">
                        <h4>新規物件情報更新</h4>
                        <p>物件データベース更新</p>
                    </div>
                    <div class="task-status">通常</div>
                </div>
            </div>
        </section>
    </main>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/app.js"></script>
    <script>
        // ログアウト機能
        function logout() {
            if (confirm('ログアウトしますか？')) {
                window.location.href = 'login.html';
            }
        }
    </script>
</body>
</html>
