<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„É≠„Ç∞„Ç§„É≥ - RentPipe</title>
    <link rel="stylesheet" href="css/main.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .login-container {
            background: white;
            border-radius: 20px;
            padding: 50px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .logo {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .login-title {
            font-size: 28px;
            font-weight: bold;
            color: #1e3a8a;
            margin-bottom: 8px;
        }

        .login-subtitle {
            color: #64748b;
            font-size: 16px;
            margin-bottom: 40px;
        }

        .login-btn {
            display: block;
            width: 100%;
            padding: 16px 24px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 15px;
            text-decoration: none;
        }

        .google-btn {
            background: #4285f4;
            color: white;
        }

        .google-btn:hover {
            background: #357ae8;
        }

        .demo-btn {
            background: #10b981;
            color: white;
        }

        .demo-btn:hover {
            background: #059669;
        }

        .message {
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }

        .success {
            background: #d1fae5;
            color: #065f46;
        }

        .error {
            background: #fee2e2;
            color: #991b1b;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="logo">üè†</div>
        <h1 class="login-title">RentPipe</h1>
        <p class="login-subtitle">Ë≥ÉË≤∏Âñ∂Ê•≠„Çí„ÄÅÊµÅ„Çå„Çã„Çà„ÅÜ„Å´</p>

        <button class="login-btn google-btn" onclick="handleGoogleLogin()">
            G Google„Åß„É≠„Ç∞„Ç§„É≥
        </button>

        <button class="login-btn demo-btn" onclick="handleDemoLogin()">
            üîß „Éá„É¢„É≠„Ç∞„Ç§„É≥
        </button>

        <div id="message" class="message"></div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    
    <script>
        // FirebaseË®≠ÂÆö
        const firebaseConfig = {
            apiKey: "AIzaSyBvJGdan0lvVSkaAbbSXQkoh6YyPoGyTgM",
            authDomain: "rentpipe-ab04e.firebaseapp.com",
            projectId: "rentpipe-ab04e",
            storageBucket: "rentpipe-ab04e.firebasestorage.app",
            messagingSenderId: "586040985916",
            appId: "1:586040985916:web:3cdb5db072f1a6569fb639"
        };

        firebase.initializeApp(firebaseConfig);

        function showMessage(text, type = 'error') {
            const msgDiv = document.getElementById('message');
            msgDiv.textContent = text;
            msgDiv.className = `message ${type}`;
            msgDiv.style.display = 'block';
        }

        function saveAuthAndRedirect(userData) {
            // „Ç∑„É≥„Éó„É´Ë™çË®º„Ç∑„Çπ„ÉÜ„É†„Å´‰øùÂ≠ò
            localStorage.setItem('rentpipe_auth_simple', 'logged_in');
            localStorage.setItem('rentpipe_user_simple', JSON.stringify(userData));
            
            console.log('‚úÖ Ë™çË®º‰øùÂ≠òÂÆå‰∫Ü:', userData.email);
            showMessage('„É≠„Ç∞„Ç§„É≥ÊàêÂäüÔºÅ„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å´ÁßªÂãï„Åó„Åæ„Åô', 'success');
            
            // Á¢∫ÂÆü„Å™„É™„ÉÄ„Ç§„É¨„ÇØ„Éà
            setTimeout(() => {
                console.log('üîÑ „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å´„É™„ÉÄ„Ç§„É¨„ÇØ„Éà');
                window.location.href = 'index.html';
            }, 1000);
        }

        async function handleGoogleLogin() {
            console.log('üîê Google„É≠„Ç∞„Ç§„É≥ÈñãÂßã');
            
            const btn = event.target;
            btn.disabled = true;
            btn.textContent = '„É≠„Ç∞„Ç§„É≥‰∏≠...';
            
            try {
                const provider = new firebase.auth.GoogleAuthProvider();
                const result = await firebase.auth().signInWithPopup(provider);
                
                const userData = {
                    uid: result.user.uid,
                    email: result.user.email,
                    displayName: result.user.displayName,
                    photoURL: result.user.photoURL
                };
                
                saveAuthAndRedirect(userData);
                
            } catch (error) {
                console.error('Google„É≠„Ç∞„Ç§„É≥„Ç®„É©„Éº:', error);
                showMessage('„É≠„Ç∞„Ç§„É≥„Å´Â§±Êïó„Åó„Åæ„Åó„Åü: ' + error.message);
                btn.disabled = false;
                btn.textContent = 'G Google„Åß„É≠„Ç∞„Ç§„É≥';
            }
        }

        function handleDemoLogin() {
            console.log('üîß „Éá„É¢„É≠„Ç∞„Ç§„É≥ÂÆüË°å');
            
            const userData = {
                uid: 'demo-user-123',
                email: 'demo@rentpipe.com',
                displayName: '„Éá„É¢„É¶„Éº„Ç∂„Éº',
                photoURL: null
            };
            
            saveAuthAndRedirect(userData);
        }

        // „Éö„Éº„Ç∏„É≠„Éº„ÉâÊôÇÔºöÊó¢„Å´„É≠„Ç∞„Ç§„É≥Ê∏à„Åø„Åã„ÉÅ„Çß„ÉÉ„ÇØ
        window.addEventListener('load', () => {
            const authStatus = localStorage.getItem('rentpipe_auth_simple');
            if (authStatus === 'logged_in') {
                console.log('‚úÖ Êó¢„Å´„É≠„Ç∞„Ç§„É≥Ê∏à„Åø');
                showMessage('Êó¢„Å´„É≠„Ç∞„Ç§„É≥Ê∏à„Åø„Åß„Åô„ÄÇ„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å´ÁßªÂãï„Åó„Åæ„Åô', 'success');
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 1000);
            }
        });

        console.log('‚úÖ „É≠„Ç∞„Ç§„É≥„Éö„Éº„Ç∏Ê∫ñÂÇôÂÆå‰∫Ü');
    </script>
</body>
</html>
