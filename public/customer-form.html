<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¡§å®¢ç™»éŒ² - RentPipe</title>
    <link rel="stylesheet" href="css/main.css">
    <style>
        .form-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .form-card {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .form-header {
            margin-bottom: 30px;
        }
        
        .form-header h1 {
            font-size: 28px;
            margin: 0 0 10px 0;
        }
        
        .form-header p {
            color: #6b7280;
            margin: 0;
        }

        .form-section {
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 2px solid #e5e7eb;
        }

        .form-section:last-of-type {
            border-bottom: none;
        }

        .form-section h2 {
            font-size: 20px;
            color: #1f2937;
            margin: 0 0 20px 0;
            padding-left: 12px;
            border-left: 4px solid #3b82f6;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            font-weight: 500;
            margin-bottom: 8px;
            color: #1f2937;
        }
        
        .form-group label .required {
            color: #ef4444;
            margin-left: 4px;
        }

        .form-group label .optional {
            color: #9ca3af;
            font-size: 12px;
            margin-left: 4px;
        }
        
        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="tel"],
        .form-group input[type="number"],
        .form-group input[type="date"],
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.2s;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        /* ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼é–¢é€£ */
        .slider-container {
            margin-top: 10px;
        }

        .slider-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 18px;
            font-weight: 600;
            color: #3b82f6;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #e5e7eb;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            transition: all 0.2s;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            background: #2563eb;
            transform: scale(1.1);
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: none;
        }

        /* ãƒ€ãƒ–ãƒ«ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ */
        .double-slider {
            position: relative;
            height: 40px;
        }

        .double-slider input[type="range"] {
            position: absolute;
            pointer-events: none;
            -webkit-appearance: none;
            background: transparent;
        }

        .double-slider input[type="range"]::-webkit-slider-thumb {
            pointer-events: all;
        }

        .double-slider input[type="range"]::-moz-range-thumb {
            pointer-events: all;
        }

        .slider-track {
            position: absolute;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            width: 100%;
            top: 16px;
        }

        /* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚°ãƒ«ãƒ¼ãƒ— */
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 10px;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: normal;
        }

        .checkbox-group label:hover {
            background: #f9fafb;
            border-color: #3b82f6;
        }

        .checkbox-group input[type="checkbox"] {
            margin-right: 8px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .equipment-category {
            margin-bottom: 25px;
        }

        .equipment-category h3 {
            font-size: 16px;
            color: #6b7280;
            margin: 0 0 12px 0;
            font-weight: 600;
        }

        /* ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã‚°ãƒ«ãƒ¼ãƒ— */
        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .radio-group label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-weight: normal;
        }

        .radio-group input[type="radio"] {
            margin-right: 6px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 30px;
        }
        
        .btn {
            flex: 1;
            padding: 14px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2563eb;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        .btn-secondary {
            background: #f3f4f6;
            color: #4b5563;
        }
        
        .btn-secondary:hover {
            background: #e5e7eb;
        }

        @media (max-width: 768px) {
            .form-card {
                padding: 20px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .checkbox-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="customer.html" class="logo">RentPipe</a>
            <div class="nav-links">
                <a href="customer.html">é¡§å®¢ç®¡ç†</a>
                <a href="pipeline.html">ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³</a>
                <span id="userEmail" class="user-email"></span>
            </div>
        </div>
    </nav>

    <div class="form-container">
        <div class="form-card">
            <div class="form-header">
                <h1>æ–°è¦é¡§å®¢ç™»éŒ²</h1>
                <p>ãŠå®¢æ§˜ã®åŸºæœ¬æƒ…å ±ã¨å¸Œæœ›æ¡ä»¶ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
            </div>

            <form id="customerForm">
                <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
                <!-- åŸºæœ¬æƒ…å ± -->
                <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
                <div class="form-section">
                    <h2>åŸºæœ¬æƒ…å ±</h2>

                    <div class="form-row">
                        <div class="form-group">
                            <label>ãŠåå‰<span class="required">*</span></label>
                            <input type="text" id="name" placeholder="å±±ç”°å¤ªéƒ" required>
                        </div>
                        <div class="form-group">
                            <label>ãƒ•ãƒªã‚¬ãƒŠ<span class="optional">(ä»»æ„)</span></label>
                            <input type="text" id="nameKana" placeholder="ãƒ¤ãƒãƒ€ã‚¿ãƒ­ã‚¦">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹<span class="required">*</span></label>
                            <input type="email" id="email" placeholder="yamada@example.com" required>
                        </div>
                        <div class="form-group">
                            <label>é›»è©±ç•ªå·<span class="required">*</span></label>
                            <input type="tel" id="phone" placeholder="090-1234-5678" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>ç”Ÿå¹´æœˆæ—¥<span class="optional">(ä»»æ„)</span></label>
                            <input type="date" id="birthday">
                        </div>
                        <div class="form-group">
                            <label>æ€§åˆ¥<span class="optional">(ä»»æ„)</span></label>
                            <select id="gender">
                                <option value="no_answer">å›ç­”ã—ãªã„</option>
                                <option value="male">ç”·æ€§</option>
                                <option value="female">å¥³æ€§</option>
                                <option value="other">ãã®ä»–</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>ç¾ä½æ‰€<span class="optional">(ä»»æ„)</span></label>
                        <input type="text" id="currentAddress" placeholder="æ±äº¬éƒ½æ¸‹è°·åŒºã€‡ã€‡1-2-3">
                    </div>

                    <div class="form-group">
                        <label>ç¾åœ¨ã®å±…ä½å½¢æ…‹<span class="optional">(ä»»æ„)</span></label>
                        <select id="currentHousing">
                            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                            <option value="è³ƒè²¸">è³ƒè²¸</option>
                            <option value="æŒå®¶">æŒå®¶</option>
                            <option value="å®Ÿå®¶">å®Ÿå®¶</option>
                            <option value="ç¤¾å®…ãƒ»å¯®">ç¤¾å®…ãƒ»å¯®</option>
                            <option value="ãã®ä»–">ãã®ä»–</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>è·æ¥­<span class="optional">(ä»»æ„)</span></label>
                            <input type="text" id="occupation" placeholder="ä¼šç¤¾å“¡ã€ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ãªã©">
                        </div>
                        <div class="form-group">
                            <label>å‹¤å‹™å…ˆå<span class="optional">(ä»»æ„)</span></label>
                            <input type="text" id="companyName" placeholder="æ ªå¼ä¼šç¤¾ã€‡ã€‡">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>å‹¤ç¶šå¹´æ•°<span class="optional">(ä»»æ„)</span></label>
                            <input type="number" id="yearsEmployed" placeholder="5" min="0">
                        </div>
                        <div class="form-group">
                            <label>å¹´å<span class="optional">(ä»»æ„ãƒ»ä¸‡å††)</span></label>
                            <input type="number" id="annualIncome" placeholder="450" min="0">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>å¼•è¶Šã—ç†ç”±<span class="optional">(ä»»æ„)</span></label>
                            <input type="text" id="movingReason" placeholder="è»¢å‹¤ã€çµå©šãªã©">
                        </div>
                        <div class="form-group">
                            <label>å…¥å±…äººæ•°<span class="optional">(ä»»æ„)</span></label>
                            <input type="number" id="numberOfOccupants" value="1" min="1">
                        </div>
                    </div>
                </div>

                <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
                <!-- å¸Œæœ›æ¡ä»¶ -->
                <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
                <div class="form-section">
                    <h2>å¸Œæœ›æ¡ä»¶</h2>

                    <div class="form-group">
                        <label>äºˆç®—ï¼ˆç®¡ç†è²»è¾¼ã¿ï¼‰<span class="required">*</span></label>
                        <div class="slider-display">
                            <span id="budgetMinDisplay">8.0ä¸‡å††</span>
                            <span>ã€œ</span>
                            <span id="budgetMaxDisplay">10.0ä¸‡å††</span>
                        </div>
                        <div class="double-slider">
                            <div class="slider-track"></div>
                            <input type="range" id="budgetMin" min="30000" max="500000" step="5000" value="80000">
                            <input type="range" id="budgetMax" min="30000" max="500000" step="5000" value="100000">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>å…¥å±…å¸Œæœ›æ™‚æœŸ<span class="optional">(ä»»æ„)</span></label>
                        <input type="text" id="moveInDate" placeholder="ä¾‹: 2025å¹´4æœˆä¸Šæ—¬ã€å³å…¥å±…å¯">
                    </div>

                    <div class="form-group">
                        <label>å¸Œæœ›ã‚¨ãƒªã‚¢<span class="optional">(ä»»æ„)</span></label>
                        <input type="text" id="areas" placeholder="ä¾‹: æ¸‹è°·é§…ã¾ã§30åˆ†ä»¥å†…ã€ç›®é»’é§…å¾’æ­©15åˆ†ä»¥å†…">
                    </div>

                    <div class="form-group">
                        <label>å¸Œæœ›é–“å–ã‚Š<span class="optional">(ä»»æ„)</span></label>
                        <input type="text" id="layout" placeholder="ä¾‹: 1Kã€œ1DKã€ã§ãã‚Œã°ç‹¬ç«‹ã‚­ãƒƒãƒãƒ³">
                    </div>

                    <div class="form-group">
                        <label>éƒ¨å±‹ã®åºƒã•<span class="optional">(ä»»æ„)</span></label>
                        <div class="slider-container">
                            <div class="slider-display">
                                <span id="roomSizeDisplay">25ã¡ä»¥ä¸Š</span>
                            </div>
                            <input type="range" id="roomSize" min="15" max="100" step="1" value="25">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>é§…å¾’æ­©<span class="optional">(ä»»æ„)</span></label>
                        <div class="slider-container">
                            <div class="slider-display">
                                <span id="stationWalkDisplay">10åˆ†ä»¥å†…</span>
                            </div>
                            <input type="range" id="stationWalk" min="1" max="30" step="1" value="10">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>ç¯‰å¹´æ•°<span class="optional">(ä»»æ„)</span></label>
                        <div class="radio-group">
                            <label>
                                <input type="radio" name="buildingAgeType" value="any" id="buildingAgeAny">
                                ã“ã ã‚ã‚‰ãªã„
                            </label>
                            <label>
                                <input type="radio" name="buildingAgeType" value="specific" id="buildingAgeSpecific" checked>
                                æŒ‡å®šã™ã‚‹
                            </label>
                        </div>
                        <div class="slider-container" id="buildingAgeSlider">
                            <div class="slider-display">
                                <span id="buildingAgeDisplay">15å¹´ä»¥å†…</span>
                            </div>
                            <input type="range" id="buildingAge" min="0" max="40" step="1" value="15">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>å¸Œæœ›éšæ•°<span class="optional">(ä»»æ„)</span></label>
                        <div class="slider-container">
                            <div class="slider-display">
                                <span id="floorDisplay">2éšä»¥ä¸Š</span>
                            </div>
                            <input type="range" id="floor" min="1" max="10" step="1" value="2">
                        </div>
                    </div>
                </div>

                <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
                <!-- è¨­å‚™ãƒ»æ¡ä»¶ -->
                <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
                <div class="form-section">
                    <h2>è¨­å‚™ãƒ»æ¡ä»¶</h2>

                    <div class="equipment-category">
                        <h3>ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</h3>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="eq_autoLock">
                                ã‚ªãƒ¼ãƒˆãƒ­ãƒƒã‚¯
                            </label>
                        </div>
                    </div>

                    <div class="equipment-category">
                        <h3>ğŸš¿ æ°´å›ã‚Š</h3>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="eq_separateBath">
                                ãƒã‚¹ãƒˆã‚¤ãƒ¬åˆ¥
                            </label>
                            <label>
                                <input type="checkbox" id="eq_separateWashroom">
                                æ´—é¢æ‰€ç‹¬ç«‹
                            </label>
                            <label>
                                <input type="checkbox" id="eq_indoorWashing">
                                å®¤å†…æ´—æ¿¯æ©Ÿç½®å ´
                            </label>
                            <label>
                                <input type="checkbox" id="eq_twoGasStove">
                                2å£ä»¥ä¸Šã‚³ãƒ³ãƒ­
                            </label>
                        </div>
                    </div>

                    <div class="equipment-category">
                        <h3>ğŸ  å†…è£…</h3>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="eq_flooring">
                                ãƒ•ãƒ­ãƒ¼ãƒªãƒ³ã‚°
                            </label>
                            <label>
                                <input type="checkbox" id="eq_noTatami">
                                ç•³NG(æ´‹å®¤å¸Œæœ›)
                            </label>
                        </div>
                    </div>

                    <div class="equipment-category">
                        <h3>ğŸ¢ å…±ç”¨è¨­å‚™</h3>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="eq_elevator">
                                ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼
                            </label>
                            <label>
                                <input type="checkbox" id="eq_deliveryBox">
                                å®…é…ãƒœãƒƒã‚¯ã‚¹
                            </label>
                            <label>
                                <input type="checkbox" id="eq_internet">
                                ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆç„¡æ–™
                            </label>
                        </div>
                    </div>

                    <div class="equipment-category">
                        <h3>ğŸš— é§è»Šãƒ»é§è¼ª</h3>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="eq_parking">
                                é§è»Šå ´
                            </label>
                            <label>
                                <input type="checkbox" id="eq_bike">
                                ãƒã‚¤ã‚¯ç½®å ´
                            </label>
                            <label>
                                <input type="checkbox" id="eq_bicycle">
                                é§è¼ªå ´
                            </label>
                        </div>
                    </div>

                    <div class="equipment-category">
                        <h3>ğŸµ ç‰¹æ®Šæ¡ä»¶</h3>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="eq_petAllowed">
                                ãƒšãƒƒãƒˆå¯
                            </label>
                            <label>
                                <input type="checkbox" id="eq_instrumentAllowed">
                                æ¥½å™¨å¯
                            </label>
                            <label>
                                <input type="checkbox" id="eq_sohoAllowed">
                                SOHOãƒ»äº‹å‹™æ‰€åˆ©ç”¨å¯
                            </label>
                        </div>
                    </div>
                </div>

                <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
                <!-- ãã®ä»– -->
                <!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
                <div class="form-section">
                    <h2>ãã®ä»–</h2>

                    <div class="form-group">
                        <label>å‚™è€ƒãƒ»ç‰¹è¨˜äº‹é …<span class="optional">(ä»»æ„)</span></label>
                        <textarea id="notes" placeholder="ãã®ä»–ã€ã”è¦æœ›ã‚„ã”è³ªå•ãªã©ã”ã–ã„ã¾ã—ãŸã‚‰ã”è¨˜å…¥ãã ã•ã„"></textarea>
                    </div>

                    <div class="form-group">
                        <label>ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çŠ¶æ…‹<span class="required">*</span></label>
                        <select id="pipelineStatus" required>
                            <option value="åˆå›ç›¸è«‡">åˆå›ç›¸è«‡</option>
                            <option value="ç‰©ä»¶ç´¹ä»‹">ç‰©ä»¶ç´¹ä»‹</option>
                            <option value="å†…è¦‹èª¿æ•´">å†…è¦‹èª¿æ•´</option>
                            <option value="ç”³è¾¼æº–å‚™">ç”³è¾¼æº–å‚™</option>
                            <option value="å¯©æŸ»ä¸­">å¯©æŸ»ä¸­</option>
                            <option value="å¥‘ç´„æ‰‹ç¶šã">å¥‘ç´„æ‰‹ç¶šã</option>
                            <option value="å®Œäº†">å®Œäº†</option>
                        </select>
                    </div>
                </div>

                <div class="button-group">
                    <button type="button" class="btn btn-secondary" onclick="history.back()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                    <button type="submit" class="btn btn-primary">ç™»éŒ²ã™ã‚‹</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="js/integrated-auth-manager-v2.js"></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="js/google-sheets-api.js">
    <script src="js/data-migration.js"></script>
    <script src="js/unified-data-manager.js"></script>
    <script src="js/unified-sheets-manager.js"></script>
    <script src="js/app-initializer.js"></script>
    <script>
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å€¤è¡¨ç¤ºæ›´æ–°
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        // äºˆç®—ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ï¼ˆãƒ€ãƒ–ãƒ«ï¼‰
        const budgetMin = document.getElementById('budgetMin');
        const budgetMax = document.getElementById('budgetMax');
        const budgetMinDisplay = document.getElementById('budgetMinDisplay');
        const budgetMaxDisplay = document.getElementById('budgetMaxDisplay');

        function updateBudgetDisplay() {
            let min = parseInt(budgetMin.value);
            let max = parseInt(budgetMax.value);

            // æœ€å°å€¤ãŒæœ€å¤§å€¤ã‚’è¶…ãˆãªã„ã‚ˆã†ã«
            if (min > max) {
                min = max;
                budgetMin.value = min;
            }

            budgetMinDisplay.textContent = (min / 10000).toFixed(1) + 'ä¸‡å††';
            budgetMaxDisplay.textContent = (max / 10000).toFixed(1) + 'ä¸‡å††';
        }

        budgetMin.addEventListener('input', updateBudgetDisplay);
        budgetMax.addEventListener('input', updateBudgetDisplay);

        // éƒ¨å±‹ã®åºƒã•ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
        const roomSize = document.getElementById('roomSize');
        const roomSizeDisplay = document.getElementById('roomSizeDisplay');

        roomSize.addEventListener('input', function() {
            roomSizeDisplay.textContent = this.value + 'ã¡ä»¥ä¸Š';
        });

        // é§…å¾’æ­©ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
        const stationWalk = document.getElementById('stationWalk');
        const stationWalkDisplay = document.getElementById('stationWalkDisplay');

        stationWalk.addEventListener('input', function() {
            stationWalkDisplay.textContent = this.value + 'åˆ†ä»¥å†…';
        });

        // ç¯‰å¹´æ•°ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
        const buildingAge = document.getElementById('buildingAge');
        const buildingAgeDisplay = document.getElementById('buildingAgeDisplay');
        const buildingAgeAny = document.getElementById('buildingAgeAny');
        const buildingAgeSpecific = document.getElementById('buildingAgeSpecific');
        const buildingAgeSlider = document.getElementById('buildingAgeSlider');

        buildingAge.addEventListener('input', function() {
            if (this.value == 0) {
                buildingAgeDisplay.textContent = 'æ–°ç¯‰';
            } else {
                buildingAgeDisplay.textContent = this.value + 'å¹´ä»¥å†…';
            }
        });

        buildingAgeAny.addEventListener('change', function() {
            if (this.checked) {
                buildingAgeSlider.style.display = 'none';
            }
        });

        buildingAgeSpecific.addEventListener('change', function() {
            if (this.checked) {
                buildingAgeSlider.style.display = 'block';
            }
        });

        // å¸Œæœ›éšæ•°ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
        const floor = document.getElementById('floor');
        const floorDisplay = document.getElementById('floorDisplay');

        floor.addEventListener('input', function() {
            floorDisplay.textContent = this.value + 'éšä»¥ä¸Š';
        });

        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å‡¦ç†
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        document.getElementById('customerForm').addEventListener('submit', async function(event) {
            event.preventDefault();

            // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            if (!validateForm()) {
                return;
            }

            // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿åé›†
            const formData = collectFormData();

            try {
                // é¡§å®¢ãƒ‡ãƒ¼ã‚¿ã‚’ç™»éŒ²
                const result = await UnifiedDataManager.addCustomer(formData);

                if (result.success) {
                    alert('é¡§å®¢ã‚’ç™»éŒ²ã—ã¾ã—ãŸ!');
                    window.location.href = 'customer.html';
                } else {
                    alert('ã‚¨ãƒ©ãƒ¼: ' + result.error);
                }
            } catch (error) {
                console.error('ç™»éŒ²ã‚¨ãƒ©ãƒ¼:', error);
                alert('é¡§å®¢ã®ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ');
            }
        });

        // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿åé›†
        function collectFormData() {
            return {
                basicInfo: {
                    name: document.getElementById('name').value.trim(),
                    nameKana: document.getElementById('nameKana').value.trim(),
                    email: document.getElementById('email').value.trim(),
                    phone: document.getElementById('phone').value.trim(),
                    birthday: document.getElementById('birthday').value,
                    gender: document.getElementById('gender').value,
                    currentAddress: document.getElementById('currentAddress').value.trim(),
                    currentHousing: document.getElementById('currentHousing').value,
                    occupation: document.getElementById('occupation').value.trim(),
                    companyName: document.getElementById('companyName').value.trim(),
                    yearsEmployed: parseInt(document.getElementById('yearsEmployed').value) || 0,
                    annualIncome: parseInt(document.getElementById('annualIncome').value) || 0,
                    movingReason: document.getElementById('movingReason').value.trim(),
                    numberOfOccupants: parseInt(document.getElementById('numberOfOccupants').value) || 1
                },
                preferences: {
                    budget: {
                        min: parseInt(document.getElementById('budgetMin').value),
                        max: parseInt(document.getElementById('budgetMax').value),
                        note: ""
                    },
                    moveInDate: document.getElementById('moveInDate').value.trim(),
                    moveInDateNote: "",
                    areas: document.getElementById('areas').value.trim(),
                    areasNote: "",
                    layout: document.getElementById('layout').value.trim(),
                    layoutNote: "",
                    roomSize: parseInt(document.getElementById('roomSize').value),
                    roomSizeNote: "",
                    stationWalk: parseInt(document.getElementById('stationWalk').value),
                    stationWalkNote: "",
                    buildingAge: {
                        value: document.querySelector('input[name="buildingAgeType"]:checked').value === 'any' 
                            ? 999 
                            : parseInt(document.getElementById('buildingAge').value),
                        type: document.querySelector('input[name="buildingAgeType"]:checked').value,
                        note: ""
                    },
                    floor: parseInt(document.getElementById('floor').value),
                    floorNote: ""
                },
                equipment: {
                    autoLock: document.getElementById('eq_autoLock').checked,
                    separateBath: document.getElementById('eq_separateBath').checked,
                    separateWashroom: document.getElementById('eq_separateWashroom').checked,
                    indoorWashing: document.getElementById('eq_indoorWashing').checked,
                    twoGasStove: document.getElementById('eq_twoGasStove').checked,
                    flooring: document.getElementById('eq_flooring').checked,
                    noTatami: document.getElementById('eq_noTatami').checked,
                    elevator: document.getElementById('eq_elevator').checked,
                    deliveryBox: document.getElementById('eq_deliveryBox').checked,
                    internet: document.getElementById('eq_internet').checked,
                    parking: document.getElementById('eq_parking').checked,
                    bike: document.getElementById('eq_bike').checked,
                    bicycle: document.getElementById('eq_bicycle').checked,
                    petAllowed: document.getElementById('eq_petAllowed').checked,
                    instrumentAllowed: document.getElementById('eq_instrumentAllowed').checked,
                    sohoAllowed: document.getElementById('eq_sohoAllowed').checked,
                    equipmentNote: ""
                },
                additionalInfo: {
                    notes: document.getElementById('notes').value.trim()
                },
                agentMemo: "",
                pipelineStatus: document.getElementById('pipelineStatus').value
            };
        }

        // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        function validateForm() {
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            const phone = document.getElementById('phone').value.trim();

            if (!name) {
                alert('ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return false;
            }

            if (!email) {
                alert('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return false;
            }

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('æ­£ã—ã„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return false;
            }

            if (!phone) {
                alert('é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return false;
            }

            return true;
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateBudgetDisplay();
        });
    </script>
</body>
</html>
